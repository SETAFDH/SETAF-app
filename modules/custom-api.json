{
    "openapi": "3.0.0",
    "info": {
        "version": "1.0.0",
        "title": "Custom API",
        "description": "This is the place to add your own path endpoints"
    },
    "servers": [
        {
            "description": "Endpoint for testing on localhost",
            "url":"/exist/apps/setaf"
        }
    ],
    "components": {
        "securitySchemes": {
            "basicAuth": {
                "type": "http",
                "scheme": "basic"
            },
            "cookieAuth": {
                "type": "apiKey",
                "name": "teipublisher.com.login",
                "in": "cookie"
            }
        }
    },
    "tags": [
        {
            "name": "encyclopedia",
            "description": "Endpoints used by the 'Damen Conversations Lexikon'"
        },
        {
            "name": "documentation",
            "description": "Endpoints for displaying the documentation using a custom URL"
        },
        {
            "name": "iiif",
            "description": "Endpoints providing IIIF presentation manifests"
        }
    ],
    "paths": {
        "/encyclopedia": {
            "get": {
                "summary": "Encyclopedia root page",
				"description": "Registers a custom URL for the encyclopedia example (Damen Conversations Lexikon) to be used instead of the document name.",
                "operationId": "vapi:view",
				"x-error-handler": "vapi:handle-error",
                "tags": ["encyclopedia"],
				"parameters": [
					{
						"name": "file",
						"in": "query",
						"schema": {
							"type": "string",
                            "default": "pages/tei-lex"
						}
					},
                    {
						"name": "docid",
						"in": "query",
						"description": "Relative path to the document",
						"required": true,
						"schema": {
							"type": "string",
							"example": "test/orlik_to_serafin.xml",
                            "default": "test/DamenConvLex-1834.xml"
						},
						"allowReserved": true
					}
				],
				"responses": {
					"200": {
						"description": "HTML of the page",
						"content": {
							"text/html": {
								"schema": {
									"type": "string"
								}
							}
						}
					},
					"404": {
						"description": "The document was not found",
						"content": {
							"text/html": {
								"schema": {
									"type": "string"
								}
							}
						}
					}
				}
            }
        },
        "/encyclopedia/{search}": {
            "get": {
                "summary": "Show encyclopedia entry matching {search}",
				"description": "Search endpoint used for the encyclopedia example (Damen Conversations Lexikon)",
                "operationId": "vapi:view",
				"x-error-handler": "vapi:handle-error",
                "tags": ["encyclopedia"],
				"parameters": [
					{
						"name": "file",
						"in": "query",
						"schema": {
							"type": "string",
                            "default": "pages/tei-lex"
						}
					},
                    {
						"name": "docid",
						"in": "query",
						"description": "Relative path to the document",
						"required": true,
						"schema": {
							"type": "string",
							"example": "test/orlik_to_serafin.xml",
                            "default": "test/DamenConvLex-1834.xml"
						},
						"allowReserved": true
					},
					{
						"name": "search",
						"in": "path",
						"description": "headword query",
						"required": true,
						"schema": {
							"type": "string"
						}
					}
				],
				"responses": {
					"200": {
						"description": "HTML of the page",
						"content": {
							"text/html": {
								"schema": {
									"type": "string"
								}
							}
						}
					},
					"404": {
						"description": "The document was not found",
						"content": {
							"text/html": {
								"schema": {
									"type": "string"
								}
							}
						}
					}
				}
            }
        },
        "/api/lemma": {
            "get": {
                "summary": "List encyclopedia headwords",
                "description": "Retrieve list of headwords in format required by pb-split-list. Used by the encyclopedia sample (Damen Conversations Lexikon)",
                "operationId": "custom:lemmata",
                "tags": ["encyclopedia"],
                "parameters": [
					{
						"name": "category",
						"in": "query",
						"schema": {
							"type": "string"
						}
					},
                    {
                        "name": "limit",
                        "in": "query",
                        "schema": {
                            "type": "integer",
                            "default": 20
                        }
                    },
                    {
                        "name": "search",
                        "in": "query",
                        "schema":{
                            "type": "string"
                        }
                    }
					,
					{
						"name": "lang",
						"in": "query",
						"schema": {
							"type": "string"
						}
					}
                ],
                "responses": {
                    "200": {
                        "description": "Categories and places to display",
                        "content": {
                            "application/json": {
                                "schema":{
                                    "type": "object"
                                }
                            }
                        }
                    }
                }
            }
        },
        
        
        "/static/{doc}": {
            "get": {
                "summary": "Retrieve the HTML template used for displaying a document",
                "description": "Get the HTML template associated with the given document. This is called whenever the users tries to view a document. The actual content of the document will then be loaded by the template.",
                "tags": ["view"],
                "operationId": "custom:view-about",
                "parameters": [
                    {
                        "name": "doc",
                        "in": "path",
                        "description": "Relative path to the document",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "example": "presentation-projet"
                        },
                        "allowReserved": true
                    },
                    {
                        "name": "template",
                        "in": "query",
                        "description": "Name of the template to be used. Overwrites any default template setting.",
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "view",
                        "in": "query",
                        "schema": {
                            "type": "string",
                            "enum": ["page", "div", "single"]
                        },
                        "description": "The view type used by the main view which displays the document, e.g. 'page' or 'div'. This has an influence on the generated links, which need to differ when linking to a page rather than a section."
                    },
                    {
                        "name": "odd",
                        "in": "query",
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "action",
                        "in": "query",
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "HTML view for the document",
                        "content": {
                            "text/html": {
                                "schema": {
                                    "type": "string"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "The document was not found",
                        "content": {
                            "text/html": {
                                "schema": {
                                    "type": "string"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "An error occurred",
                        "content": {
                            "text/html": {
                                "schema": {
                                    "type": "string"
                                }
                            }
                        }
                    }
                }
            }
        }
    },
    "security": [
        {
            "cookieAuth": []
        },
        {
            "basicAuth": []
        }
    ]
}